<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta content="text/html; charset=utf-8" http-equiv="content-type" /><title>Q14 - The interval dance</title><meta content="Aaron Powell" name="author" /><meta content="me@aaron-powell.com" name="email" /><meta content="Q14 - The interval dance" name="title" /><meta content="Regular JavaScript questions to explore the fun world of JavaScript and keep you on your toes. Follow @JavaScriptQuiz on Twitter for the latest questions" name="description" /><meta content="width=device-width" name="viewport" /><link href="/styles/site.css" rel="stylesheet" type="text/css" /><link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" /><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script></head><body class="q14-- the interval dance"><div id="main"><header><h1><a href="http://javascriptquiz.com">JavaScript Quiz</a></h1><h3>Regular JavaScript questions to explore the fun world of JavaScript and keep you on your toes. Follow @JavaScriptQuiz on Twitter for the latest questions</h3></header><div id="content" class="content"><article id="post" class="post undefined"><h1>Q14 - The interval dance</h1><h3>Mon Oct 24 2011</h3><div><p>A developer has been asked to write some JavaScript which will perform an AJAX request every 30 seconds and display the returned data on the page.</p>

<p>The code produced by the developer looks as follows:</p>

<script src="https://gist.github.com/1308134.js"> </script>

<p>What problem can come up if the server load fluctuates, resulting in the response time changing?</p>

<p>How would you change the code to negate the problem?</p>

<p>Post your JavaScript as a comment. Comments will be held in the moderation queue until the answer is posted. Full answer and explanation will be appended to this post around 72 - 96 hours after the question is posted.</p>

<p>If you don't want your answer public, please post a comment like 'playing at home' so I can at least guage how many people are participating and whether the questions are useful.</p>

<p>Good Luck :).</p>

<hr />

<p>In this weeks question we were looking at a common mistake that people make when using the <code>setInterval</code> method in JavaScript. With <code>setInterval</code> the function that you pass in will always be executed when the timeout period rolls over. This is why you can run into an issue when you're using it to perform operations which you don't control the duration of, a server call.</p>

<p>Because of this a new design pattern has come into common use, the <a href="http://www.erichynds.com/javascript/a-recursive-settimeout-pattern/">Recursive SetTimeout Pattern</a>. The idea behind this pattern is that you perform your operation in a <code>setTimeout</code> callback function (using the time period you would in the interval) and within the timeout execution you kick off a new timeout.</p>

<p>Here is the code for the answer:</p>

<script src="https://gist.github.com/1321278.js"> </script>

<p>What I've done is added a name to the function, <code>go</code>, and added a new call in the success callback that will kick off the new timeout call.</p></div></article><a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="javascriptquiz">Tweet</a><script type="text/javascript" src="//platform.twitter.com/widgets.js"> </script><section id="comments"><h3>Answers</h3><div id="disqus_thread">&nbsp;</div><script>var __slice = Array.prototype.slice;var __hasProp = Object.prototype.hasOwnProperty;var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };var __extends = function(child, parent) {  for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; }  function ctor() { this.constructor = child; }  ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype;  return child; };var __indexOf = Array.prototype.indexOf || function(item) {  for (var i = 0, l = this.length; i < l; i++) {    if (this[i] === item) return i;  } return -1; };(function () {
    return $(function() {
      window.disqus_shortname = "javascriptquiz";
      window.disqus_identifier = document.title || 'Home';
      window.disqus_developer = document.location.href.indexOf("localhost") ? 1 : 0;
      window.disqus_url = document.location.href;
      if (typeof window.DISQUS !== "undefined") {
        return window.DISQUS.reset({
          reload: true,
          config: __bind(function() {
            this.page.identifier = document.title;
            return this.page.url = document.location.href;
          }, this)
        });
      }
    });
  }).call(this);</script></section></div></div><script src="http://javascriptquiz.disqus.com/embed.js"></script><script src="http://www.google-analytics.com/ga.js"></script><script src="/scripts/modernizr.custom.js"></script><script src="/scripts/analytics.js"></script></body></html>